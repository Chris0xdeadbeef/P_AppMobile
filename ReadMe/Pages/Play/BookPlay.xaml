<?xml version="1.0" encoding="utf-8" ?>
<ContentPage
    xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
    xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
    x:Class="ReadMe.Pages.Play.BookPlay"
    NavigationPage.HasNavigationBar="False"
    BackgroundColor="#0B0B0B">

    <Grid RowDefinitions="80,*">

        <!-- TOP BAR -->
        <Grid Grid.Row="0" HeightRequest="80">
            <BoxView Color="Black" />

            <ImageButton
                Source="backarrow.png"
                HeightRequest="80"
                WidthRequest="80"
                Margin="15,0"
                HorizontalOptions="Start"
                VerticalOptions="Center"
                Clicked="OnBackClicked" />

            <!-- Indicateur pages -->
            <Frame
                Padding="10,6"
                CornerRadius="12"
                BackgroundColor="#AA000000"
                BorderColor="#22FFFFFF"
                HasShadow="False"
                HorizontalOptions="End"
                VerticalOptions="Center"
                Margin="0,0,16,0">

                <Label
                    x:Name="PageIndicator"
                    Text="1/1"
                    TextColor="White"
                    FontSize="14"
                    FontAttributes="Bold" />
            </Frame>
        </Grid>

        <!-- READER -->
        <Grid Grid.Row="1" x:Name="PageContainer" Padding="18" BackgroundColor="#0B0B0B">

            <!-- Texture optionnelle -->
            <Image
                Source="bgpages.jpg"
                Aspect="AspectFill"
                Opacity="0.25"
                InputTransparent="True" />

            <!-- Carte -->
            <Frame
                x:Name="ReaderFrame"
                BackgroundColor="#F6F1E7"
                CornerRadius="18"
                Padding="0"
                HasShadow="True">

                <ContentView
                    x:Name="PageContent"
                    HorizontalOptions="Fill"
                    VerticalOptions="Fill" />
            </Frame>

            <!-- WebView cachÃ© (IMPORTANT pour calculer le vrai nombre de pages) -->
            <WebView
                x:Name="MeasureWebView"
                IsVisible="False"
                Opacity="0"
                InputTransparent="True"
                HeightRequest="1"
                WidthRequest="1" />

            <!-- Gestures -->
            <Grid.GestureRecognizers>
                <SwipeGestureRecognizer Direction="Left"  Swiped="OnSwipeLeft" />
                <SwipeGestureRecognizer Direction="Right" Swiped="OnSwipeRight" />
            </Grid.GestureRecognizers>

        </Grid>
    </Grid>
</ContentPage>
